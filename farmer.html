<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Farmer Connection</title>
  <link rel="stylesheet" href="farmer.css" />
</head>

<body>
  <header>
    <h1>Farmer Connection</h1>
    <a href="main.html" class="back-button">Back to Main</a>
  </header>

  <main>
    <section id="sell-section">
      <h2>Sell Your Product</h2>
      <div class="form-container">
        <form id="product-form">
          <div class="input-group">
            <input type="text" id="seller-name" placeholder="Your Name" required />
            <span class="error-message" id="seller-name-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="seller-contact" placeholder="Contact Info" required />
            <span class="error-message" id="seller-contact-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="product-name" placeholder="Product Name" required />
            <span class="error-message" id="product-name-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="product-quantity" placeholder="Quantity" required />
            <span class="error-message" id="product-quantity-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="product-price" placeholder="Price" required />
            <span class="error-message" id="product-price-error"></span>
          </div>
          <button type="submit">Add Product</button>
        </form>
      </div>
      <ul id="product-display"></ul>
    </section>
    <section id="buy-section">
      <h2>Buy a Product</h2>
      <div class="form-container">
        <form id="buy-form">
          <div class="input-group">
            <input type="text" id="buyer-name" placeholder="Your Name" required />
            <span class="error-message" id="buyer-name-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="buyer-contact" placeholder="Contact Info" required />
            <span class="error-message" id="buyer-contact-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="buy-product-name" placeholder="Product Name to Buy" required />
            <span class="error-message" id="buy-product-name-error"></span>
          </div>
          <div class="input-group">
            <input type="text" id="buy-product-quantity" placeholder="Quantity to Buy" required />
            <span class="error-message" id="buy-product-quantity-error"></span>
          </div>
          <button type="submit">Send Request</button>
        </form>
      </div>
      <ul id="buy-request-display"></ul>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 AgriTech. All rights reserved.</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const sellForm = document.getElementById("product-form");
      const buyForm = document.getElementById("buy-form");

      function clearErrors() {
        const errorMessages = document.querySelectorAll('.error-message');
        errorMessages.forEach(msg => msg.textContent = '');
      }

      function displayError(elementId, message) {
        document.getElementById(elementId + '-error').textContent = message;
      }

      // Sell form validation and submission
      sellForm.addEventListener("submit", function (event) {
        event.preventDefault();
        clearErrors();

        const sellerName = document.getElementById("seller-name").value;
        const sellerContact = document.getElementById("seller-contact").value;
        const productName = document.getElementById("product-name").value;
        const productQuantity = document.getElementById("product-quantity").value;
        const productPrice = document.getElementById("product-price").value;

        let isValid = true;

        if (!validateName(sellerName, "seller-name")) isValid = false;
        if (!validateContact(sellerContact, "seller-contact")) isValid = false;
        if (!validateNumberInput(productQuantity, "product-quantity", "Quantity")) isValid = false;
        if (!validateNumberInput(productPrice, "product-price", "Price")) isValid = false;

        if (isValid) {
          alert("Sell form submitted successfully!");
          sellForm.reset(); // Clear the form fields after successful submission
        }
      });

      // Buy form validation and submission
      buyForm.addEventListener("submit", function (event) {
        event.preventDefault();
        clearErrors();

        const buyerName = document.getElementById("buyer-name").value;
        const buyerContact = document.getElementById("buyer-contact").value;
        const buyProductName = document.getElementById("buy-product-name").value;
        const buyProductQuantity = document.getElementById("buy-product-quantity").value;

        let isValid = true;

        if (!validateName(buyerName, "buyer-name")) isValid = false;
        if (!validateContact(buyerContact, "buyer-contact")) isValid = false;
        if (!validateNumberInput(buyProductQuantity, "buy-product-quantity", "Quantity to Buy")) isValid = false;

        if (isValid) {
          alert("Buy request sent successfully!");
          buyForm.reset(); // Clear the form fields after successful submission
        }
      });

      function validateName(name, elementId) {
        const nameRegex = /^[A-Za-z\s]+$/;
        if (!nameRegex.test(name)) {
          displayError(elementId, "Name must not contain numbers.");
          return false;
        }
        return true;
      }

      function validateContact(input, elementId) {
        const contactRegex = /^[0-9]{10}$/;
        if (!contactRegex.test(input)) {
          displayError(elementId, "Contact Info must be exactly 10 digits.");
          return false;
        }
        return true;
      }

      function validateNumberInput(input, elementId, fieldName) {
        const numberRegex = /^[0-9]+$/;
        if (!numberRegex.test(input)) {
          displayError(elementId, `${fieldName} must only contain numbers.`);
          return false;
        }
        return true;
      }
    });
  </script>
</body>

</html>